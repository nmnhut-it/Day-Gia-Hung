<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grade 9 - Unit 10: Planet Earth | English Grammar Games</title>
  <link rel="stylesheet" href="../css/shared.css">
</head>
<body>
  <header class="game-header">
    <div class="container">
      <div class="game-header__container">
        <div class="game-header__info-section">
          <h1 class="game-header__title">Grade 9 - Unit 10: Planet Earth</h1>
          <p class="game-header__subtitle">Non-defining Relative Clauses</p>
          <div class="game-info">
            <div class="game-info__item"><span class="game-info__label">Gi√°o vi√™n:</span><span class="game-info__value">Nguy·ªÖn Minh Nh·ª±t</span></div>
            <div class="game-info__item"><span class="game-info__label">H·ªçc sinh:</span><span class="game-info__value">L·ªõp 9</span></div>
          </div>
        </div>
        <div class="game-header__stats">
          <div class="stat"><span class="stat__label">ƒêi·ªÉm</span><span class="stat__value stat__value--primary" id="current-score">‚≠ê 0</span></div>
          <div class="stat"><span class="stat__label">Ti·∫øn ƒë·ªô</span><span class="stat__value" id="progress-count">0 / 0</span></div>
          <div class="stat" id="combo-display" style="display: none;"><span class="stat__label">Combo</span><span class="stat__value" id="combo-count">0</span></div>
        </div>
      </div>
      <div class="progress"><div class="progress__bar" id="progress-bar" style="width: 0%;"></div></div>
    </div>
  </header>
  <main class="container">
    <div class="theory-panel" id="theory-panel">
      <button class="theory-panel__toggle" id="theory-toggle"><span>üìñ T√†i li·ªáu ng·ªØ ph√°p</span><span class="theory-panel__icon" id="theory-icon">‚ñº</span></button>
      <div class="theory-panel__content" id="theory-content">
        <div class="theory-panel__section">
          <h3 class="theory-panel__heading">Non-defining Relative Clauses</h3>
          <p><strong>ƒê·∫∑c ƒëi·ªÉm:</strong> Ph·∫£i c√≥ d·∫•u ph·∫©y ngƒÉn c√°ch. Kh√¥ng d√πng 'that'. D√πng who, which, whose. B·ªï sung th√¥ng tin, c√≥ th·ªÉ b·ªè.</p>
          <div class="theory-panel__example"><strong>V√≠ d·ª•:</strong><br>‚Ä¢ The Moon<strong>, which is Earth's satellite,</strong> orbits Earth.<br>‚Ä¢ Mars<strong>, which has mountains,</strong> is a rocky planet.<br>‚Ä¢ My sister<strong>, who lives in London,</strong> is a doctor.</div>
        </div>
      </div>
    </div>
    <div id="exercise-container"><div class="card text-center"><h2>Loading...</h2><p>Please wait while we load the exercises.</p></div></div>
  </main>
  <script src="../js/core/utils.js"></script>
  <script src="../js/core/storage.js"></script>
  <script src="../js/core/telegram-sender.js"></script>
  <script src="../js/core/game-engine.js"></script>
  <script src="../js/exercises/multiple-choice.js"></script>
  <script src="../js/exercises/word-rearrange.js"></script>
  <script>
    const UNIT_ID='g9-unit-10-planet-earth';const DATA_PATH='../data/g9-unit-10-planet-earth.json';const theoryToggle=document.getElementById('theory-toggle');const theoryContent=document.getElementById('theory-content');const theoryIcon=document.getElementById('theory-icon');theoryToggle.addEventListener('click',()=>{const isExpanded=theoryContent.classList.contains('theory-panel__content--expanded');if(isExpanded){theoryContent.classList.remove('theory-panel__content--expanded');theoryIcon.classList.remove('theory-panel__icon--rotated');}else{theoryContent.classList.add('theory-panel__content--expanded');theoryIcon.classList.add('theory-panel__icon--rotated');}});function updateComboDisplay(){const comboDisplay=document.getElementById('combo-display');const comboCount=document.getElementById('combo-count');const state=GameEngine.getState();if(state.comboCount>=3){comboDisplay.style.display='flex';comboCount.textContent=state.comboCount+'x üî•';}else{comboDisplay.style.display='none';}}const originalUpdateUI=GameEngine.updateUI.bind(GameEngine);GameEngine.updateUI=function(){originalUpdateUI();updateComboDisplay();};async function loadAndStartGame(){try{const response=await fetch(DATA_PATH);if(!response.ok)throw new Error(`Failed to load data: ${response.status}`);const unitData=await response.json();GameEngine.init(unitData,UNIT_ID);}catch(error){console.error('Error loading game data:',error);const container=document.getElementById('exercise-container');container.innerHTML=`<div class="card"><h2 style="color: var(--danger);">Error Loading Game</h2><p>Sorry, we couldn't load the exercise data. Please try refreshing the page.</p><p style="font-size: var(--font-size-sm); color: var(--text-light);">Error: ${error.message}</p><button class="btn btn--primary mt-2" onclick="location.reload()">Reload Page</button></div>`;}}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',loadAndStartGame);}else{loadAndStartGame();}
  </script>
</body>
</html>
